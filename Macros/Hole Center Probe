// --- PROBE SPECS ---
%physical_diam  = 1.92;  // Your exact tip diameter
%deflection     = 0.26;   // The "Yaw" or pre-travel (Update this after testing!)

// --- MOVEMENT SETTINGS ---
%fast_speed     = 100;   // Slowed down slightly for the smaller 1.92mm tip
%slow_speed     = 25;    // Precision speed
%retract        = 1.0;   // Retract distance
%max_travel     = 25.0;  // Safety search limit

// --- AUTOMATIC MATH (Do not edit) ---
// Effective Radius = Physical Radius - Deflection
// We use this "smaller" radius because the probe travels *inside* the zone before triggering.
%effective_rad  = ([physical_diam] / 2) - [deflection]; 

G91                        ; Relative Mode

; --- FIND X CENTER ---
G38.2 X[max_travel] F[fast_speed]  ; Probe Right
G0 X-[retract]
G38.2 X[retract + 1] F[slow_speed] ; Probe Left
%x_left = posx               ; Store Right Hit
G0 X-[retract]             ; Retract
G38.2 X-[max_travel] F[fast_speed] ; Probe Left
G0 X[retract]
G38.2 X-[retract + 1] F[slow_speed] ; Probe Left
%x_right = posx               ; Store Left Hit
G0 X[retract]

; Calculate X Center
%x_chord = x_left + x_right ;
%x_center = x_chord/2;

G90                        ; Absolute Mode
G0 X[x_center]                 ; Move to X Center
G91                        ; Relative Mode

; --- FIND Y CENTER ---
G38.2 Y[max_travel] F[fast_speed]  ; Probe Back
G0 Y-[retract]
G38.2 Y[retract + 1] F[slow_speed] ; Probe Left
%y_max =  posy               ; Store Back Hit
G0 Y-[retract]             ; Retract
G38.2 Y-[max_travel] F[fast_speed] ; Probe Front
G0 Y[retract]
G38.2 Y-[retract + 1] F[slow_speed] ; Probe Left
%y_min = posy               ; Store Front Hit
G0 Y[retract]

; Calculate Y Center
%y_chord = y_max + y_min ;
%y_center = y_chord/2;

G90                        ; Absolute Mode
G0 Y[y_center]                ; Move to Y Center

; Set Zero
G10 L20 P1 X0 Y0